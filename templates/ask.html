{% extends "base.html" %}
{% block nav_options %}
  <a href="/student_dashboard" class="hover:text-yellow-300 transition">Home</a>
  <a href="/about" class="hover:text-yellow-300 transition">About</a>
  <a href="/rate" class="hover:text-yellow-300 transition">Rate</a>
  <a href="/logout" class="hover:text-yellow-300 transition">Logout</a>
{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto mt-16 p-6 bg-emerald-100 rounded-2xl shadow-2x1">
  <!-- Title -->
  <h1 class="text-4xl font-extrabold text-center mb-8 text-gray-800">
    ‚ùì Clear Your Doubts
  </h1>

  <!-- Chat Window -->
  <div id="chat-window" class="bg-gray-50 rounded-xl shadow-inner p-6 h-[400px] overflow-y-auto mb-6">
    <p class="text-gray-400 text-center">üí¨ Start asking your questions above ‚¨ÜÔ∏è</p>
  </div>

  <!-- Input Bar -->
  <div class="flex">
    <input id="chat-input" type="text" placeholder="Type your question..."
           class="flex-1 px-4 py-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-400 shadow-sm">
    <button onclick="sendChat()" 
            class="px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-r-lg hover:from-blue-700 hover:to-indigo-700 transition">
      Ask
    </button>
  </div>
</div>

<script>
async function sendChat() {
  let input = document.getElementById("chat-input");
  let msg = input.value.trim();
  if (!msg) return;

  let win = document.getElementById("chat-window");
  win.innerHTML += `<div class="mb-2"><b class="text-blue-700">You:</b> ${msg}</div>`;
  input.value = "";

  let res = await fetch("/ask", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({question: msg})
  });

  let data = await res.json();
  win.innerHTML += `<div class="mb-2"><b class="text-green-700">Bot:</b> ${data.answer}</div>`;
  win.scrollTop = win.scrollHeight;
}
</script>
{% endblock %}
